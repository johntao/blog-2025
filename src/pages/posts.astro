---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// Fetch posts from all author collections
const author1Posts = await getCollection('author1');
const author2Posts = await getCollection('author2');
const author3Posts = await getCollection('author3');

// Combine all posts and sort by date
const allPosts = [...author1Posts, ...author2Posts, ...author3Posts];
const posts = allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="All Posts">
  <h2>All Posts</h2>

  <h3>2025</h3>
  <ul>
    {posts.map(post => (
      <li>
        <strong>{post.data.pubDate.toLocaleDateString('en-US', { month: '2-digit', day: '2-digit' })}:</strong> <a href={`/posts/${post.slug}`}>{post.data.title}</a>
      </li>
    ))}
  </ul>
</BaseLayout>
