---
import { getCollection } from 'astro:content';
import BlogPostLayout from '../../layouts/BlogPostLayout.astro';

export async function getStaticPaths() {
  // Fetch entries from all collections
  const defaultEntries = await getCollection('default');
  const aiGeneratedEntries = await getCollection('ai-generated');

  // Map entries with collection info
  return [
    ...defaultEntries.map(entry => ({
      params: { slug: entry.slug },
      props: { entry, collection: 'default' },
    })),
    ...aiGeneratedEntries.map(entry => ({
      params: { slug: entry.slug },
      props: { entry, collection: 'ai-generated' },
    })),
  ];
}

const { entry, collection } = Astro.props;
const { Content, remarkPluginFrontmatter } = await entry.render();
---

<BlogPostLayout
  title={entry.data.title}
  pubDate={entry.data.pubDate}
  tags={entry.data.tags}
  collection={collection}
  minutesRead={remarkPluginFrontmatter.minutesRead}
>
  <Content />
</BlogPostLayout>
